{{ define "main" }}
{{ $course := .Params.course }}
{{ $week := .Params.week }}
<div style="max-width: 768px; margin: 0 auto; padding: 2rem 1rem;">
  <header style="margin-bottom: 1.5rem; border-bottom: 1px solid #dee2e6; padding-bottom: 1rem;">
    <p style="color: #6c757d; font-size: 0.875rem; margin: 0 0 0.25rem 0;">Week {{ $week }}</p>
    <h1 style="font-size: 2rem; font-weight: 700; color: #000; margin: 0 0 0.5rem 0;">{{ .Title }}</h1>
    <p style="color: #6c757d; margin: 0;">{{ with .Params.description }}{{ . }}{{ else }}Notes and problem sets for Week {{ $week }}{{ end }}</p>
  </header>

  <!-- Notes Section -->
  {{ $notes := first 1 (where .Pages "Type" "notes") }}
  {{ with $notes }}
    {{ $n := index . 0 }}
    <section style="margin-bottom: 2rem;">
      <h2 style="font-size: 1.25rem; font-weight: 600; color: #000; margin-bottom: 0.75rem;">Notes</h2>
      <ul style="list-style: none; padding: 0; margin: 0;">
        <li style="padding: 0.5rem 0;">
          <a href="{{ $n.RelPermalink }}" style="color: #007bff; text-decoration: none;">{{ $n.Title }}</a>
          {{ with $n.Params.description }}
          <p style="color: #6c757d; margin: 0.25rem 0 0 0; font-size: 0.875rem;">{{ . }}</p>
          {{ end }}
        </li>
      </ul>
    </section>
  {{ end }}

  <!-- Problems Section -->
  {{ $probs := where .Pages "Type" "problems-list" }}
  {{ with first 1 $probs }}
    {{ $probSec := index . 0 }}
    <section style="margin-bottom: 2rem;">
      <h2 style="font-size: 1.25rem; font-weight: 600; color: #000; margin-bottom: 0.75rem;">Problems</h2>
      <ul style="list-style: none; padding: 0; margin: 0;">
        {{ range $probSec.Pages }}
        <li style="padding: 0.5rem 0;">
          <a href="{{ if .Params.external }}{{ .Params.external }}{{ else }}{{ .RelPermalink }}{{ end }}" style="color: #007bff; text-decoration: none;" {{ if .Params.external }}target="_blank" rel="noopener"{{ end }}>{{ .Title }}</a>
          {{ with .Params.description }}
          <p style="color: #6c757d; margin: 0.25rem 0 0 0; font-size: 0.875rem;">{{ . }}</p>
          {{ end }}
        </li>
        {{ end }}
      </ul>
    </section>
  {{ end }}

  <!-- Problem Sets Section -->
  {{ $psets := where .Pages "Type" "psets-list" }}
  {{ with first 1 $psets }}
    {{ $psSec := index . 0 }}
    <section>
      <h2 style="font-size: 1.25rem; font-weight: 600; color: #000; margin-bottom: 0.75rem;">Problem Sets</h2>
      <ul style="list-style: none; padding: 0; margin: 0;">
        {{ range $psSec.Pages }}
        <li style="padding: 0.5rem 0; border-bottom: 1px solid #e9ecef;">
          <a href="{{ .RelPermalink }}" style="color: #007bff; text-decoration: none;">{{ .Title }}</a>
          {{ with .Params.description }}
          <p style="color: #6c757d; margin: 0.25rem 0 0 0; font-size: 0.875rem;">{{ . }}</p>
          {{ end }}
        </li>
        {{ end }}
      </ul>
    </section>
  {{ end }}
</div>
{{ end }}
