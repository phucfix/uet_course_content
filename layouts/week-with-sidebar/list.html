{{ define "main" }}
<div class="course-page-layout">
  <div class="course-container">
    {{ partial "course-sidebar.html" . }}

    <main class="course-content">
      <div class="content-wrapper">
        {{ $course := .Params.course }}
        {{ $week := .Params.week }}
        
        <h1>{{ .Title }}</h1>
        
        {{ with .Params.description }}
          <p class="description">{{ . }}</p>
        {{ end }}

        <!-- Lecture Video -->
        {{ if .Params.youtube }}
          {{ partial "youtube-embed.html" (dict "url" .Params.youtube) }}
        {{ end }}

        <!-- Lecture -->
        <h2>Lecture</h2>
        <ul>
          {{ $notes := first 1 (where .Pages "Type" "notes") }}
          {{ with $notes }}
            {{ $n := index . 0 }}
            <li><a href="{{ $n.RelPermalink }}">Notes</a></li>
          {{ end }}
          <li>
            Slides
            <ul>
              <li><a href="#">Google Slides</a></li>
              <li><a href="#">PDF</a></li>
            </ul>
          </li>
          <li>
            Source Code
            <ul>
              <li><a href="#">Index</a></li>
            </ul>
          </li>
        </ul>

        <!-- Problem Set -->
        {{ $psets := where .Pages "Type" "psets-list" }}
        {{ with first 1 $psets }}
          {{ $psSec := index . 0 }}
          <h2>Problem Set {{ $week }}</h2>
          <ul>
            {{ range $psSec.Pages }}
              <li>
                <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                {{ with .Params.description }}
                  <span class="text-muted"> - {{ . }}</span>
                {{ end }}
              </li>
            {{ end }}
          </ul>
        {{ end }}
      </div>
    </main>
  </div>
</div>
{{ end }}