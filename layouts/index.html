{{ define "main" }}
<div class="max-w-4xl mx-auto px-8 py-12">
  <h1 class="text-4xl font-bold text-slate-900 mb-6">UET Learning</h1>
  <p class="text-slate-700 mb-8 leading-relaxed">
    Hệ thống học tập trực tuyến của Trường Đại học Công nghệ - Đại học Quốc gia Hà Nội.
  </p>

  <!-- Search Bar -->
  <div class="mb-8">
    <div class="relative">
      <input 
        type="text" 
        id="course-search" 
        placeholder="Tìm kiếm khóa học..." 
        class="w-full px-4 py-2 pl-10 text-base border border-slate-300 focus:outline-none focus:border-slate-500"
      />
      <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
    </div>
    <div id="search-results" class="mt-4 hidden"></div>
  </div>

  <!-- About UET Section -->
  <div class="mb-12">
    <h2 class="text-2xl font-bold text-slate-900 mb-4">Về Trường Đại học Công nghệ</h2>
    <p class="text-slate-700 mb-4 leading-relaxed">
      Trường Đại học Công nghệ (UET) là một trong những trường đại học hàng đầu về đào tạo công nghệ thông tin và kỹ thuật tại Việt Nam, trực thuộc Đại học Quốc gia Hà Nội.
    </p>
  </div>

  <!-- Courses Section -->
  <div>
    <h2 class="text-2xl font-bold text-slate-900 mb-6">Courses</h2>
    {{ $courses := site.GetPage "section" "courses" }}
    {{ if $courses }}
      <div id="courses-grid" class="space-y-3">
        {{ range $courses.Sections }}
        <div class="course-card" data-course-name="{{ lower .Title }}" data-course-desc="{{ lower (.Params.description | default "") }}">
          <a href="{{ .RelPermalink }}" class="text-blue-600 hover:underline text-lg">
            {{ .Title }}
          </a>
          {{ with .Params.description }}
            <p class="text-slate-600 text-sm mt-1">{{ . }}</p>
          {{ end }}
        </div>
        {{ end }}
      </div>
    {{ else }}
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
        <p class="text-slate-700">Không tìm thấy khóa học. Tạo nội dung trong <code class="bg-yellow-100 px-2 py-1 rounded">content/courses/</code>.</p>
      </div>
    {{ end }}
  </div>
</div>

<script>
  // Course search functionality
  const searchInput = document.getElementById('course-search');
  const searchResults = document.getElementById('search-results');
  const coursesGrid = document.getElementById('courses-grid');
  const courseCards = document.querySelectorAll('.course-card');

  if (searchInput) {
    searchInput.addEventListener('input', function(e) {
      const query = e.target.value.toLowerCase().trim();
      
      if (query === '') {
        // Show all courses
        courseCards.forEach(card => {
          card.style.display = 'block';
        });
        searchResults.classList.add('hidden');
      } else {
        // Filter courses
        let hasResults = false;
        courseCards.forEach(card => {
          const courseName = card.getAttribute('data-course-name') || '';
          const courseDesc = card.getAttribute('data-course-desc') || '';
          
          if (courseName.includes(query) || courseDesc.includes(query)) {
            card.style.display = 'block';
            hasResults = true;
          } else {
            card.style.display = 'none';
          }
        });
        
        if (!hasResults) {
          searchResults.innerHTML = `<p class="text-slate-600">Không tìm thấy khóa học nào với từ khóa "${query}"</p>`;
          searchResults.classList.remove('hidden');
        } else {
          searchResults.classList.add('hidden');
        }
      }
    });
  }
</script>
{{ end }}
