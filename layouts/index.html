{{ define "main" }}
<!-- Top navy header similar to sample -->
<header class="site-header">
  <div class="site-header-inner">
    <div class="left">
      <button class="menu-btn" aria-label="Menu">☰</button>
      <a href="/courses/" class="px-3 py-2 border rounded border-white/20 text-white text-sm hidden sm:inline-block">VIEW ALL COURSES</a>
    </div>
    <div class="brand-center">
      <div class="brand-vertical" style="text-align:center">
  <img src="/img/Logo-DH-Cong-Nghe-UET.webp" alt="UET logo" class="h-48 md:h-56 mx-auto block" style="object-fit:contain;" />
  <div class="text-white" style="font-weight:900;margin-top:8px;letter-spacing:0.8px;font-size:1.35rem">UET</div>
        <div class="text-white text-sm" style="opacity:0.95;margin-top:4px">University of Engineering and Technology</div>
      </div>
    </div>
    <div class="right">
      <div class="search-box"><input id="course-search" placeholder="Search" class="px-3 py-2" /></div>
    </div>
  </div>
</header>

<main class="site-main site-main--home">
  <div class="fade-in">
    <div class="mb-8 lg:mb-12">
      <h1 class="text-4xl lg:text-5xl font-serif font-semibold text-white/95 text-center mt-10">Courses</h1>
    </div>

    <!-- Filters row -->
    <div class="filters bg-white border-b border-slate-200">
      <div class="max-w-6xl mx-auto px-6 lg:px-8 py-6">
        <div class="flex flex-wrap items-center gap-6 text-sm text-slate-600">
          <div>Subject Area ▾</div>
          <div>Price ▾</div>
          <div>Start Date ▾</div>
          <div>Schools ▾</div>
          <div>Duration ▾</div>
          <div>Difficulty ▾</div>
          <div>Modality ▾</div>
        </div>
      </div>
    </div>

    <!-- Results count -->
    <div class="max-w-6xl mx-auto px-6 lg:px-8 py-8">
      <div class="text-slate-700 mb-6">{{ len (where site.Pages "Section" "courses") }} results</div>

      <!-- Cards grid -->
      <div class="courses-grid-3">
        {{ $courses := site.GetPage "section" "courses" }}
        {{ if $courses }}
          {{ range $courses.Sections }}
            <a href="{{ .RelPermalink }}" class="course-card" data-course-name="{{ .Title }}" {{ with .Params.description }}data-course-desc="{{ . }}"{{ end }}>
              {{ $img := .Params.image | default "/img/course-placeholder.jpg" }}
              <div style="height:180px; background-image: url('{{ $img }}'); background-size: cover; background-position: center;"></div>
              <div class="card-body">
                <span class="card-meta">{{ with .Params.category }}{{ . }}{{ else }}Computer Science{{ end }} • {{ with .Params.mode }}{{ . }}{{ else }}Online{{ end }}</span>
                <h3 class="text-xl font-semibold text-slate-900">{{ .Title }}</h3>
                {{ with .Params.description }}<p class="text-sm text-slate-600 mt-2">{{ . }}</p>{{ end }}
              </div>
            </a>
          {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</main>

<script>
  (function(){
    const searchInput = document.getElementById('course-search');
    if (!searchInput) return;
    const cards = Array.from(document.querySelectorAll('.course-card'));
    const resultsEl = document.createElement('div');
    resultsEl.id = 'search-results';
    resultsEl.className = 'mt-4 hidden';
    searchInput.parentNode.appendChild(resultsEl);

    searchInput.addEventListener('input', function(e){
      const q = e.target.value.toLowerCase().trim();
      if (!q) {
        cards.forEach(c => c.style.display = 'block');
        resultsEl.classList.add('hidden');
        return;
      }
      let found = false;
      cards.forEach(c => {
        const n = (c.getAttribute('data-course-name')||c.querySelector('h3')?.innerText||'').toLowerCase();
        const d = (c.getAttribute('data-course-desc')||'').toLowerCase();
        if (n.includes(q) || d.includes(q)) { c.style.display = 'block'; found = true; } else { c.style.display = 'none'; }
      });
      if (!found) {
        resultsEl.innerHTML = `<p class="text-slate-600">Không tìm thấy khóa học nào với từ khóa "${q}"</p>`;
        resultsEl.classList.remove('hidden');
      } else {
        resultsEl.classList.add('hidden');
      }
    });
  })();
</script>

{{ end }}
