{{ define "main" }}
<div class="lg:grid lg:grid-cols-12 lg:gap-8">
  <aside class="lg:col-span-4">
    <div class="lg:hidden mb-6">
      <details class="bg-slate-100 rounded-md">
        <summary class="px-4 py-2 cursor-pointer font-medium">Menu</summary>
        <div class="px-4 py-3 text-sm">
          <nav class="space-y-6">
            <div>
              <h3 class="text-xs uppercase tracking-wide text-slate-500">Quick Links</h3>
              <ul class="mt-2 space-y-1">
                <li><a class="text-blue-600 hover:underline" href="/courses/">Courses</a></li>
                <li><a class="text-blue-600 hover:underline" href="/weeks/">Weeks</a></li>
              </ul>
            </div>
            {{ $weeks := site.GetPage "section" "weeks" }}
            {{ with $weeks }}
            <div>
              <h3 class="text-xs uppercase tracking-wide text-slate-500">Weeks</h3>
              <ul class="mt-2 space-y-1">
                {{ range sort .Pages "Title" }}
                  <li><a class="hover:underline" href="{{ .RelPermalink }}">{{ .Title }}</a></li>
                {{ end }}
              </ul>
            </div>
            {{ end }}
          </nav>
        </div>
      </details>
    </div>

    <div class="hidden lg:block sticky top-20">
      <nav class="space-y-6 text-sm">
        <div>
          <h3 class="text-xs uppercase tracking-wide text-slate-500">Quick Links</h3>
          <ul class="mt-2 space-y-1">
            <li><a class="text-blue-600 hover:underline" href="/courses/">Courses</a></li>
            <li><a class="text-blue-600 hover:underline" href="/weeks/">Weeks</a></li>
          </ul>
        </div>
        {{ $weeks2 := site.GetPage "section" "weeks" }}
        {{ with $weeks2 }}
        <div>
          <h3 class="text-xs uppercase tracking-wide text-slate-500">Weeks</h3>
          <ul class="mt-2 space-y-1">
            {{ range sort .Pages "Title" }}
              <li><a class="hover:underline" href="{{ .RelPermalink }}">{{ .Title }}</a></li>
            {{ end }}
          </ul>
        </div>
        {{ end }}
      </nav>
    </div>
  </aside>

  <div class="lg:col-span-8">
    <h1 class="text-3xl font-semibold mb-3">Welcome</h1>
    <p class="text-slate-600 mb-6">This site hosts UETâ€™s CS50-style course materials. Work through weekly content, problem sets, and notes. The curriculum emphasizes correctness, design, and style across C, Python, SQL, and web development.</p>

    <details class="mb-8">
      <summary class="cursor-pointer text-blue-600 hover:underline">Watch an introduction</summary>
      <div class="mt-3 aspect-w-16 aspect-h-9">
        <div class="relative w-full" style="padding-top: 56.25%;">
          <iframe class="absolute top-0 left-0 h-full w-full rounded border"
            src="https://www.youtube.com/embed/3oFAJtFE8YU?modestbranding=0&rel=0&showinfo=0"
            title="Introduction"
            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>
      </div>
    </details>

    <h2 class="text-2xl font-semibold mb-3">How to Take this Course</h2>
    <ol class="list-decimal ml-5 space-y-1 text-slate-700 mb-8">
      <li>Watch the lecture for the week.</li>
      <li>Optionally watch section and shorts for deeper dives.</li>
      <li>Complete and submit the problem set.</li>
      <li>Repeat weekly, then complete the final project.</li>
    </ol>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-10">
      <a href="/weeks/" class="block bg-white border rounded-lg p-5 hover:shadow-md transition">
        <div class="text-sm text-slate-500 mb-1">Browse</div>
        <div class="font-semibold text-lg">Weeks</div>
        <div class="text-sm text-slate-500 mt-1">Lectures, notes, and psets</div>
      </a>
      <a href="/courses/" class="block bg-white border rounded-lg p-5 hover:shadow-md transition">
        <div class="text-sm text-slate-500 mb-1">Explore</div>
        <div class="font-semibold text-lg">Courses</div>
        <div class="text-sm text-slate-500 mt-1">Course overviews and sections</div>
      </a>
    </div>

    <h2 class="text-2xl font-semibold mb-4">Courses</h2>
    {{ $courses := site.GetPage "section" "courses" }}
    {{ if $courses }}
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6">
        {{ range $courses.Sections }}
          <a href="{{ .RelPermalink }}" class="block bg-white border rounded-lg p-5 hover:shadow-md transition">
            <div class="text-sm text-slate-500 mb-2">Course</div>
            <div class="font-semibold text-lg">{{ .Title }}</div>
            <div class="text-sm text-slate-500 mt-1">{{ with .Params.description }}{{ . }}{{ else }}Explore weeks and problem sets{{ end }}</div>
          </a>
        {{ end }}
      </div>
    {{ else }}
      <p>No courses found. Create content under <code>content/courses/</code>.</p>
    {{ end }}
  </div>
</div>
{{ end }}
