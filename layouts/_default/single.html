{{ define "main" }}
  {{/* Detect course pages to include sidebar */}}
  {{ $isCourse := or (eq .Section "courses") (eq .Type "course-welcome") (and .Parent (eq .Parent.Type "course-welcome")) (and .Parent.Parent (eq .Parent.Parent.Type "course-welcome")) }}

  {{ if $isCourse }}
    <div class="course-page-layout">
      <div class="course-container">
        {{ partial "course-sidebar.html" . }}
        <main class="course-content px-6 py-6">
          <article class="prose prose-lg max-w-none">
            <header class="mb-6">
              <h1 class="text-3xl font-bold text-slate-900">{{ .Title }}</h1>
              {{ with .Description }}<p class="text-slate-600">{{ . }}</p>{{ end }}
            </header>
            {{ .Content }}

          </article>
        </main>
      </div>
    </div>
  {{ else }}
    <article style="max-width: 768px; margin: 0 auto; padding: 2rem 1rem;">
      <header style="margin-bottom: 1.5rem; border-bottom: 1px solid #dee2e6; padding-bottom: 1rem;">
        <h1 style="font-size: 2rem; font-weight: 700; color: #000; margin: 0 0 0.5rem 0;">{{ .Title }}</h1>
        {{ with .Description }}
        <p style="color: #6c757d; margin: 0;">{{ . }}</p>
        {{ end }}
      </header>
      <div class="prose">
        {{ .Content }}
      </div>
    </article>
  {{ end }}
{{ end }}

